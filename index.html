<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shourya Calculation - Vistara Word School</title>
  <style>
    :root{ --sheet:#ffffff; --grid:#e5e7eb; --accent:#2563eb; --text:#111827; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background: #f6f7fb url('./assets/background.jpg') center top/cover no-repeat fixed;
    }
    .wrap{
      min-height:100dvh;
      display:flex; align-items:center; justify-content:center;
      padding: clamp(10px, 3vw, 40px);
      background: linear-gradient(180deg, rgba(255,255,255,0.0), rgba(255,255,255,0.6) 30%, rgba(255,255,255,0.85) 60%);
    }
    .panel{
      width:min(980px, 98vw);
      background: rgba(255,255,255,0.96);
      border-radius: 22px;
      border:1px solid rgba(0,0,0,0.06);
      box-shadow: 0 10px 26px rgba(0,0,0,0.15);
      padding: clamp(14px, 3vw, 26px);
    }
    h1{ margin:0 0 8px; font-size:clamp(22px, 3.6vw, 34px); }
    .sub{ margin: 0 0 16px; color:#374151; }

    .sheet{
      background:var(--sheet);
      border: 1px solid var(--grid);
      border-radius: 12px;
      overflow: hidden;
    }
    table{ border-collapse: collapse; width:100%; font-size: 16px; }
    thead th{
      background:#f8fafc; text-align:left; padding:10px 12px; border-bottom:1px solid var(--grid);
      font-weight:700;
    }
    tbody td{
      padding:10px 12px; border-bottom:1px solid var(--grid); vertical-align: middle;
    }
    tbody tr:last-child td{ border-bottom:0; }
    .right{ text-align:right; }
    .op{ font-weight:700; }
    .muted{ color:#6b7280; }
    input[type="number"], select{
      width:100%; padding:10px 10px; border-radius:12px; border:1px solid #d1d5db; background:#fff; font-size:16px;
      outline:none; transition:border .15s ease, box-shadow .15s ease;
    }
    input[type="number"]:focus, select:focus{ border-color:var(--accent); box-shadow:0 0 0 3px rgba(37,99,235,0.15); }
    footer{ margin-top:14px; text-align:center; font-size:12px; color:#6b7280; }
  </style>
</head>
<body>
  <div class="wrap">
    <main class="panel">
      <h1>Shourya Calculation - Vistara Word School</h1>
      <p class="sub">Each row has its own inputs and rounding setting. Negative results show <em>not found</em>.</p>

      <section class="sheet" role="region" aria-label="Results sheet">
        <table>
          <thead>
            <tr>
              <th style="width:26%">Operation</th>
              <th style="width:19%">A</th>
              <th style="width:19%">B</th>
              <th style="width:16%">Decimals</th>
              <th class="right" style="width:20%">Result</th>
            </tr>
          </thead>
          <tbody id="rows">
            <tr data-op="+">
              <td class="op">A ＋ B</td>
              <td><input type="number" step="any" inputmode="decimal" placeholder="A"></td>
              <td><input type="number" step="any" inputmode="decimal" placeholder="B"></td>
              <td>
                <select>
                  <option value="-1">Auto</option>
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2" selected>2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="6">6</option>
                </select>
              </td>
              <td class="right" data-res><span class="muted">—</span></td>
            </tr>
            <tr data-op="-">
              <td class="op">A − B</td>
              <td><input type="number" step="any" inputmode="decimal" placeholder="A"></td>
              <td><input type="number" step="any" inputmode="decimal" placeholder="B"></td>
              <td>
                <select>
                  <option value="-1">Auto</option>
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2" selected>2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="6">6</option>
                </select>
              </td>
              <td class="right" data-res><span class="muted">—</span></td>
            </tr>
            <tr data-op="*">
              <td class="op">A × B</td>
              <td><input type="number" step="any" inputmode="decimal" placeholder="A"></td>
              <td><input type="number" step="any" inputmode="decimal" placeholder="B"></td>
              <td>
                <select>
                  <option value="-1">Auto</option>
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2" selected>2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="6">6</option>
                </select>
              </td>
              <td class="right" data-res><span class="muted">—</span></td>
            </tr>
            <tr data-op="/">
              <td class="op">A ÷ B</td>
              <td><input type="number" step="any" inputmode="decimal" placeholder="A"></td>
              <td><input type="number" step="any" inputmode="decimal" placeholder="B"></td>
              <td>
                <select>
                  <option value="-1">Auto</option>
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2" selected>2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="6">6</option>
                </select>
              </td>
              <td class="right" data-res><span class="muted">—</span></td>
            </tr>
          </tbody>
        </table>
      </section>

      <footer>Background uses your Mathematics image. Divide-by-zero handled safely.</footer>
    </main>
  </div>

  <script>
    (function(){
      const $ = (s, el=document) => el.querySelector(s);
      const $$ = (s, el=document) => Array.from(el.querySelectorAll(s));

      function fmt(n, decimals){
        if (Number.isNaN(n)) return "—";
        if (decimals >= 0) return Number(n.toFixed(decimals));
        return n;
      }

      function computeRow(tr){
        const op = tr.dataset.op;
        const [aEl, bEl] = $$("input[type='number']", tr);
        const dEl = $("select", tr);
        const res = $("[data-res]", tr);

        const av = parseFloat(aEl.value);
        const bv = parseFloat(bEl.value);
        const dec = parseInt(dEl.value, 10);

        if (Number.isNaN(av) || Number.isNaN(bv)) {
          res.innerHTML = '<span class="muted">—</span>'; return;
        }

        let out;
        switch(op){
          case "+": out = av + bv; break;
          case "-": out = av - bv; break;
          case "*": out = av * bv; break;
          case "/":
            if (bv === 0){ res.textContent = "∞"; return; }
            out = av / bv; break;
        }

        if (out < 0) { res.textContent = "not found"; return; }

        res.textContent = fmt(out, dec);
      }

      // Attach listeners per row
      $$("#rows tr").forEach((tr, idx) => {
        ["input","change"].forEach(ev => {
          tr.addEventListener(ev, () => computeRow(tr));
        });
        // restore state
        const KEY = "shourya-row-v2-" + idx;
        try{
          const s = JSON.parse(localStorage.getItem(KEY)||"{}");
          const ins = $$("input[type='number']", tr);
          if(s.a!=null) ins[0].value = s.a;
          if(s.b!=null) ins[1].value = s.b;
          if(s.d!=null) $("select", tr).value = s.d;
        }catch{}
        computeRow(tr);
        // persist on unload
        window.addEventListener("beforeunload", () => {
          const ins = $$("input[type='number']", tr);
          const data = {a:ins[0].value, b:ins[1].value, d:$("select", tr).value};
          localStorage.setItem(KEY, JSON.stringify(data));
        });
      });
    })();
  </script>
</body>
</html>
